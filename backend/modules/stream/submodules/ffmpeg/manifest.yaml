id: ffmpeg
parent: stream
name: FFmpeg Backend
version: 1.1.0
priority: 10
description: Универсальный бэкенд на базе FFmpeg для стриминга, конвертации и превью.
entrypoints:
  factory: "backend.modules.stream.submodules.ffmpeg:create_backend"

capabilities:
  - streaming
  - conversion
  - preview

# Специфичные настройки бэкенда (генерируют UI)
config_schema:
  type: object
  properties:
    binary_path:
      type: string
      default: "ffmpeg"
      description: "Путь к исполняемому файлу FFmpeg"
      group: "Основные"
    global_args:
      type: string
      default: "-hide_banner -loglevel error -stats"
      description: "Глобальные аргументы запуска FFmpeg"
      group: "Дополнительно"
    webrtc_support:
      type: boolean
      default: true
      description: "Поддержка транскодирования для WebRTC"
      group: "WebRTC"

# Поддерживаемые форматы и протоколы
formats:
  input_protocols:
    - http
    - hls
    - udp
    - rtp
    - rtsp
    - rtmp
    - rtmps
    - srt
  output_types:
    - http
    - http_ts
    - hls
    - webrtc
  preview_formats:
    - jpeg
    - png
    - webp
    - avif
    - tiff
