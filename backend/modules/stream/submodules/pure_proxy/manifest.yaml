id: pure_proxy
parent: stream
name: Pure Proxy (Native)
version: 1.0.0
priority: 60
author: NMS-Team
description: Нативный Python-прокси для HTTP/HLS и UDP-to-HTTP конвертации без внешних зависимостей.
entrypoints: {}

capabilities:
  - streaming
  - proxy

# Настройки бэкенда, сгруппированные по связкам
config_schema:
  type: object
  properties:
    buffer_size:
      type: integer
      title: "Размер буфера (байт)"
      minimum: 4096
      maximum: 524288
      default: 65536
      description: "Объем данных при проксировании."
      group: "HTTP Прокси"
    connect_timeout:
      type: integer
      title: "Таймаут подключения (сек)"
      minimum: 1
      maximum: 120
      default: 15
      description: "Ожидание соединения с источником."
      group: "HTTP Прокси"
    read_timeout:
      type: integer
      title: "Таймаут чтения (сек)"
      minimum: 1
      maximum: 300
      default: 30
      description: "Ожидание получения данных."
      group: "HTTP Прокси"
    max_redirects:
      type: integer
      title: "Макс. редиректов"
      minimum: 0
      maximum: 10
      default: 5
      description: "Лимит HTTP перенаправлений."
      group: "HTTP Прокси"
    udp_recv_buffer:
      type: integer
      title: "UDP Буфер приема"
      minimum: 4096
      maximum: 524288
      default: 65536
      description: "Размер буфера приёма UDP пакетов."
      group: "UDP Прием"

    hls_segment_duration:
      type: integer
      title: "HLS: Длительность сегмента (сек)"
      minimum: 1
      maximum: 60
      default: 5
      description: "Длительность одного TS сегмента для HLS."
      group: "Буферизация HLS"
    hls_max_segments:
      type: integer
      title: "HLS: Глубина архива (сегментов)"
      minimum: 3
      maximum: 500
      default: 24
      description: "Количество хранимых сегментов для HLS."
      group: "Буферизация HLS"
    http_ts_segment_duration:
      type: integer
      title: "HTTP_TS: Длительность сегмента (сек)"
      minimum: 1
      maximum: 60
      default: 5
      description: "Длительность одного TS сегмента для HTTP_TS."
      group: "Буферизация HTTP_TS"
    http_ts_max_segments:
      type: integer
      title: "HTTP_TS: Глубина архива (сегментов)"
      minimum: 3
      maximum: 500
      default: 24
      description: "Количество хранимых сегментов для HTTP_TS."
      group: "Буферизация HTTP_TS"

# Поддерживаемые форматы и протоколы
formats:
  input_protocols:
    - http
    - hls
    - udp
  output_types:
    - http
    - http_ts
    - hls
  preview_formats: []
