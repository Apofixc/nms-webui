id: astra
name: Cesbo Astra
version: 1.0.0
description: Управление и мониторинг инстансов Cesbo Astra
enabled_by_default: true
type: system

deps: []

entrypoints:
  factory: "backend.modules.astra:create_module"
  router:
    - "backend.modules.astra.api.instances:router_factory"
    - "backend.modules.astra.api.monitoring:router_factory"
    - "backend.modules.astra.api.channels:router_factory"

config_schema:
  type: object
  properties:
    timeout:
      title: "Таймаут (сек)"
      group: "Сетевые запросы"
      description: "Максимальное время ожидания ответа от сервера Astra (в секундах)."
      type: integer
      minimum: 1
      maximum: 300
      default: 30
    retry_count:
      title: "Количество повторных попыток"
      group: "Сетевые запросы"
      description: "Сколько раз повторять запрос при ошибке соединения."
      type: integer
      minimum: 0
      maximum: 10
      default: 3
    ui_update_interval:
      title: "Интервал обновления интерфейса (сек)"
      group: "Интерфейс"
      description: "Как часто веб-интерфейс будет запрашивать новые данные инстансов."
      type: integer
      minimum: 1
      maximum: 60
      default: 8
    scan_host:
      title: "Сканирование: Базовый Хост"
      group: "Настройки сканирования"
      description: "IP-адрес или домен по умолчанию для сканирования инстансов."
      type: string
      default: "127.0.0.1"
    scan_port_start:
      title: "Сканирование: Начальный порт"
      group: "Настройки сканирования"
      description: "С какого порта начинать поиск инстансов."
      type: integer
      minimum: 1
      maximum: 65535
      default: 8000
    scan_port_end:
      title: "Сканирование: Конечный порт"
      group: "Настройки сканирования"
      description: "На каком порту заканчивать поиск инстансов."
      type: integer
      minimum: 1
      maximum: 65535
      default: 8050
    default_api_key:
      title: "API Ключ по умолчанию"
      group: "Авторизация"
      description: "API-ключ администратора, который будет использоваться для сканирования и добавления новых инстансов по умолчанию."
      type: string
      default: "admin"

routes:
  - path: "/astra/instances"
    name: "astra-instances"
    meta:
      title: "Инстансы"
      icon: "search"
      group: "Astra"
      requires_auth: false
  - path: "/astra/monitoring"
    name: "astra-monitoring"
    meta:
      title: "Мониторинг"
      icon: "activity"
      group: "Astra"
      requires_auth: false
  - path: "/astra/channels"
    name: "astra-channels"
    meta:
      title: "Каналы"
      icon: "tv"
      group: "Astra"
      requires_auth: false

menu:
  location: sidebar
  group: "Astra"
  items:
    - path: "/astra/instances"
      label: "Инстансы"
      icon: "search"
    - path: "/astra/monitoring"
      label: "Общая информация"
      icon: "activity"
    - path: "/astra/channels"
      label: "Каналы"
      icon: "tv"

hooks: {}
assets:
  cache_dirs: []
  data_dirs: []
