id: pure_webrtc
parent: stream
name: Pure WebRTC (Native)
version: 1.0.0
priority: 70
author: NMS-Team
description: Нативный Python-бэкенд для WebRTC стриминга на базе aiortc.
entrypoints: {}

capabilities:
  - streaming

# Настройки бэкенда, сгруппированные по связкам
config_schema:
  type: object
  properties:
    # ── WebRTC Pipeline ──
    stun_server:
      type: string
      title: "STUN Сервер"
      default: "stun:stun.l.google.com:19302"
      description: "Адрес сервера для обнаружения NAT в WebRTC"
      group: "Плеер (WebRTC)"
    turn_server:
      type: string
      title: "TURN Сервер"
      default: ""
      description: "Данные для обхода фаерволов (опционально)"
      group: "Плеер (WebRTC)"
    video_codec:
      type: string
      title: "Видеокодек"
      enum: ["H264", "VP8"]
      default: "H264"
      description: "Предпочитаемый кодек для WebRTC"
      group: "Плеер (WebRTC)"
    max_bitrate:
      type: integer
      title: "Макс. битрейт (Kbps)"
      minimum: 100
      maximum: 20000
      default: 2000
      description: "Лимит битрейта для WebRTC вещания"
      group: "Плеер (WebRTC)"
    ice_timeout:
      type: integer
      title: "Таймаут ICE (сек)"
      minimum: 5
      maximum: 60
      default: 30
      description: "Время ожидания сетевого соединения"
      group: "Плеер (WebRTC)"

# Поддерживаемые форматы и протоколы
formats:
  input_protocols:
    - http
    - udp
    - rtp
  output_types:
    - webrtc
  preview_formats: []
